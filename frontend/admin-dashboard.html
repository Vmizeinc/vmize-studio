<!DOCTYPE html>
<script>
// Admin authentication check
window.addEventListener('DOMContentLoaded', function() {
    const token = localStorage.getItem('vmize_admin_token');
    if (!token) {
        window.location.href = 'admin-login.html';
    }
});
</script>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VMIZE Admin Dashboard - Complete System</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --vmize-purple: #6B4CE6;
            --vmize-blue: #4CC9F0;
            --text-primary: #1a1a1a;
            --text-secondary: #666;
            --border-color: #e0e0e0;
            --bg-light: #f8f9fa;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --info: #17a2b8;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-light);
            color: var(--text-primary);
        }

        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: white;
            border-right: 1px solid var(--border-color);
            padding: 24px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            padding: 0 24px 24px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 24px;
        }

        .logo h2 {
            background: linear-gradient(135deg, var(--vmize-purple), var(--vmize-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 24px;
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-section-title {
            padding: 0 24px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .nav-item {
            padding: 12px 24px;
            color: var(--text-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .nav-item:hover {
            background: var(--bg-light);
            color: var(--vmize-purple);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--vmize-purple), var(--vmize-blue));
            color: white;
            font-weight: 600;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
        }

        /* Main Content */
        .main-content {
            margin-left: 260px;
            flex: 1;
            padding: 32px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }

        .header h1 {
            font-size: 32px;
            font-weight: 700;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--vmize-purple), var(--vmize-blue));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(107, 76, 230, 0.3);
        }

        .btn-secondary {
            background: white;
            border: 2px solid var(--vmize-purple);
            color: var(--vmize-purple);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .stat-icon.purple { background: #f5f3ff; }
        .stat-icon.blue { background: #e3f7ff; }
        .stat-icon.green { background: #e6f9ed; }
        .stat-icon.orange { background: #fff5e6; }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-change {
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stat-change.positive { color: var(--success); }
        .stat-change.negative { color: var(--danger); }

        /* Content Sections */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 24px;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            text-align: left;
            padding: 12px;
            background: var(--bg-light);
            font-weight: 600;
            font-size: 14px;
            color: var(--text-secondary);
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        tr:hover {
            background: var(--bg-light);
        }

        /* Badges */
        .badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }

        .badge.active { background: #d4edda; color: #155724; }
        .badge.paused { background: #fff3cd; color: #856404; }
        .badge.suspended { background: #f8d7da; color: #721c24; }
        .badge.success { background: #d4edda; color: #155724; }
        .badge.warning { background: #fff3cd; color: #856404; }
        .badge.danger { background: #f8d7da; color: #721c24; }

        /* Charts */
        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        /* Grid Layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active { display: flex; }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--vmize-purple);
        }

        select.form-input {
            cursor: pointer;
        }

        /* Filters */
        .filters {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Action buttons */
        .action-btn {
            padding: 6px 12px;
            border-radius: 6px;
            border: none;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            margin-right: 8px;
        }

        .action-btn.view { background: #e3f7ff; color: #17a2b8; }
        .action-btn.edit { background: #fff5e6; color: #ff9800; }
        .action-btn.delete { background: #f8d7da; color: #dc3545; }

        /* Progress bars */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-light);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--vmize-purple), var(--vmize-blue));
            transition: width 0.3s;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .main-content {
                margin-left: 0;
            }

            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h2>VMIZE Admin</h2>
                <p style="color: #666; font-size: 12px; margin-top: 4px;">Global Dashboard</p>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Overview</div>
                <div class="nav-item active" onclick="showSection('overview')">
                    <span class="nav-icon">üìä</span>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" onclick="showSection('analytics')">
                    <span class="nav-icon">üìà</span>
                    <span>Analytics</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Client Management</div>
                <div class="nav-item" onclick="showSection('clients')">
                    <span class="nav-icon">üë•</span>
                    <span>All Clients</span>
                </div>
                <div class="nav-item" onclick="showSection('api-keys')">
                    <span class="nav-icon">üîë</span>
                    <span>API Keys</span>
                </div>
                <div class="nav-item" onclick="showSection('usage')">
                    <span class="nav-icon">üìä</span>
                    <span>Usage Tracking</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Content & Assets</div>
                <div class="nav-item" onclick="showSection('images')">
                    <span class="nav-icon">üñºÔ∏è</span>
                    <span>Images</span>
                </div>
                <div class="nav-item" onclick="showSection('conversions')">
                    <span class="nav-icon">üí∞</span>
                    <span>Conversions</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">System</div>
                <div class="nav-item" onclick="showSection('performance')">
                    <span class="nav-icon">‚ö°</span>
                    <span>Performance</span>
                </div>
                <div class="nav-item" onclick="showSection('security')">
                    <span class="nav-icon">üîí</span>
                    <span>Security</span>
                </div>
                <div class="nav-item" onclick="showSection('billing')">
                    <span class="nav-icon">üí≥</span>
                    <span>Billing</span>
                </div>
                <div class="nav-item" onclick="showSection('logs')">
                    <span class="nav-icon">üìù</span>
                    <span>Admin Logs</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Account</div>
                <div class="nav-item" onclick="alert('Settings coming soon')">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </div>
                <div class="nav-item" onclick="logout()">
                    <span class="nav-icon">üö™</span>
                    <span>Logout</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Overview Section -->
            <div class="content-section active" id="overview">
                <div class="header">
                    <h1>Dashboard Overview</h1>
                    <div class="user-menu">
                        <button class="btn btn-secondary" onclick="exportData()">üì• Export Data</button>
                        <button class="btn btn-primary" onclick="refreshData()">üîÑ Refresh</button>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <div class="stat-label">Total Try-Ons Today</div>
                                <div class="stat-value" id="stat-tryons">2,847</div>
                                <div class="stat-change positive">‚Üë 12.5% from yesterday</div>
                            </div>
                            <div class="stat-icon purple">üëï</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <div class="stat-label">Active Clients</div>
                                <div class="stat-value" id="stat-clients">47</div>
                                <div class="stat-change positive">‚Üë 3 new this week</div>
                            </div>
                            <div class="stat-icon blue">üë•</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <div class="stat-label">API Calls Today</div>
                                <div class="stat-value" id="stat-api">15.2K</div>
                                <div class="stat-change positive">‚Üë 8.3%</div>
                            </div>
                            <div class="stat-icon green">üîå</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <div>
                                <div class="stat-label">Revenue Attributed</div>
                                <div class="stat-value">$34.2K</div>
                                <div class="stat-change positive">‚Üë 15.7%</div>
                            </div>
                            <div class="stat-icon orange">üí∞</div>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Try-Ons Over Time</h3>
                            <select class="form-input" style="width: auto;">
                                <option>Last 7 Days</option>
                                <option>Last 30 Days</option>
                                <option>Last 90 Days</option>
                            </select>
                        </div>
                        <div class="chart-container">
                            <canvas id="tryonsChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Revenue Attribution</h3>
                            <select class="form-input" style="width: auto;">
                                <option>Last 7 Days</option>
                                <option>Last 30 Days</option>
                                <option>Last 90 Days</option>
                            </select>
                        </div>
                        <div class="chart-container">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Top Clients -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Top Clients by Usage</h3>
                        <button class="btn btn-secondary">View All</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Client</th>
                                    <th>Plan</th>
                                    <th>Try-Ons</th>
                                    <th>API Calls</th>
                                    <th>Revenue</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="topClientsTable">
                                <tr>
                                    <td><strong>Acme Fashion</strong><br><span style="font-size: 12px; color: #666;">acme@fashion.com</span></td>
                                    <td>Enterprise</td>
                                    <td>1,234</td>
                                    <td>5,432</td>
                                    <td>$12,450</td>
                                    <td><span class="badge active">Active</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Style Co.</strong><br><span style="font-size: 12px; color: #666;">hello@style.co</span></td>
                                    <td>Professional</td>
                                    <td>892</td>
                                    <td>3,421</td>
                                    <td>$8,920</td>
                                    <td><span class="badge active">Active</span></td>
                                </tr>
                                <tr>
                                    <td><strong>Boutique XYZ</strong><br><span style="font-size: 12px; color: #666;">info@boutique.xyz</span></td>
                                    <td>Starter</td>
                                    <td>456</td>
                                    <td>1,892</td>
                                    <td>$2,340</td>
                                    <td><span class="badge active">Active</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Clients Section -->
            <div class="content-section" id="clients">
                <div class="header">
                    <h1>Client Management</h1>
                    <button class="btn btn-primary" onclick="openModal('createClient')">‚ûï Add New Client</button>
                </div>

                <div class="filters">
                    <div class="filter-group">
                        <label>Status:</label>
                        <select class="form-input" style="width: auto;">
                            <option>All</option>
                            <option>Active</option>
                            <option>Paused</option>
                            <option>Suspended</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Plan:</label>
                        <select class="form-input" style="width: auto;">
                            <option>All Plans</option>
                            <option>Starter</option>
                            <option>Professional</option>
                            <option>Enterprise</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <input type="search" class="form-input" placeholder="Search clients..." style="width: 300px;">
                    </div>
                </div>

                <div class="card">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Client Info</th>
                                    <th>Plan</th>
                                    <th>Created</th>
                                    <th>Last Activity</th>
                                    <th>Usage</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="clientsTable">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- API Keys Section -->
            <div class="content-section" id="api-keys">
                <div class="header">
                    <h1>API Keys Management</h1>
                    <button class="btn btn-primary" onclick="openModal('createAPIKey')">üîë Create New Key</button>
                </div>

                <div class="filters">
                    <div class="filter-group">
                        <label>Client:</label>
                        <select class="form-input" style="width: auto;">
                            <option>All Clients</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Status:</label>
                        <select class="form-input" style="width: auto;">
                            <option>All</option>
                            <option>Active</option>
                            <option>Revoked</option>
                        </select>
                    </div>
                </div>

                <div class="card">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Key Name</th>
                                    <th>Client</th>
                                    <th>Scope</th>
                                    <th>Usage Limit</th>
                                    <th>Last Used</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="apiKeysTable">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Usage Section -->
            <div class="content-section" id="usage">
                <div class="header">
                    <h1>Usage & Cost Tracking</h1>
                    <div class="user-menu">
                        <select class="form-input" style="width: auto;">
                            <option>This Month</option>
                            <option>Last Month</option>
                            <option>Last 3 Months</option>
                        </select>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Total API Calls</div>
                        <div class="stat-value">428.5K</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                        <p style="font-size: 12px; color: #666; margin-top: 8px;">75% of monthly allocation</p>
                    </div>

                    <div class="stat-card">
                        <div class="stat-label">Estimated Compute Cost</div>
                        <div class="stat-value">$2,847</div>
                        <div class="stat-change positive">‚Üë $124 from last month</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-label">GPU Usage Hours</div>
                        <div class="stat-value">1,245h</div>
                        <div class="stat-change positive">‚Üë 8.3%</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-label">Storage Used</div>
                        <div class="stat-value">847GB</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 42%"></div>
                        </div>
                        <p style="font-size: 12px; color: #666; margin-top: 8px;">42% of 2TB limit</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Per-Client Usage</h3>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Client</th>
                                    <th>API Calls</th>
                                    <th>Try-Ons</th>
                                    <th>Failed Requests</th>
                                    <th>Avg Response Time</th>
                                    <th>Est. Cost</th>
                                </tr>
                            </thead>
                            <tbody id="usageTable">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Images Section -->
            <div class="content-section" id="images">
                <div class="header">
                    <h1>Image & Asset Tracking</h1>
                    <button class="btn btn-secondary" onclick="exportImages()">üì• Export Report</button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Images Generated Today</div>
                        <div class="stat-value">2,847</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Total Images This Month</div>
                        <div class="stat-value">94.2K</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg Processing Time</div>
                        <div class="stat-value">12.4s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Success Rate</div>
                        <div class="stat-value">98.7%</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Images Generated per Day</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="imagesChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Images</h3>
                        <div class="filters">
                            <select class="form-input" style="width: auto;">
                                <option>All Clients</option>
                            </select>
                            <select class="form-input" style="width: auto;">
                                <option>All Statuses</option>
                                <option>Success</option>
                                <option>Failed</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Image ID</th>
                                    <th>Client</th>
                                    <th>User/Session</th>
                                    <th>Processing Time</th>
                                    <th>Status</th>
                                    <th>Timestamp</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="imagesTable">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Conversions Section -->
            <div class="content-section" id="conversions">
                <div class="header">
                    <h1>Analytics & Conversion Tracking</h1>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Try-On Conversion Rate</div>
                        <div class="stat-value">8.7%</div>
                        <div class="stat-change positive">‚Üë 2.3% vs baseline</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Non-Try-On Conversion</div>
                        <div class="stat-value">4.2%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Conversion Uplift</div>
                        <div class="stat-value">+107%</div>
                        <div class="stat-change positive">Try-on vs non-try-on</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Revenue Attributed</div>
                        <div class="stat-value">$847K</div>
                        <div class="stat-change positive">This month</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Conversion Funnel</h3>
                    </div>
                    <div style="padding: 20px;">
                        <div style="margin-bottom: 24px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>Product Views</span>
                                <span><strong>100,000</strong> (100%)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 100%"></div>
                            </div>
                        </div>

                        <div style="margin-bottom: 24px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>Try-On Clicks</span>
                                <span><strong>32,500</strong> (32.5%)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 32.5%"></div>
                            </div>
                        </div>

                        <div style="margin-bottom: 24px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>Try-On Generated</span>
                                <span><strong>28,750</strong> (28.8%)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 28.8%"></div>
                            </div>
                        </div>

                        <div style="margin-bottom: 24px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>Add to Cart</span>
                                <span><strong>12,400</strong> (12.4%)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 12.4%"></div>
                            </div>
                        </div>

                        <div style="margin-bottom: 24px;">
                            <div style="display: flex; justify-space-between; margin-bottom: 8px;">
                                <span>Purchase Completed</span>
                                <span><strong>8,700</strong> (8.7%)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 8.7%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Section -->
            <div class="content-section" id="performance">
                <div class="header">
                    <h1>Performance & Reliability</h1>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Avg Response Time</div>
                        <div class="stat-value">247ms</div>
                        <div class="stat-change positive">‚Üì 12ms from yesterday</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">95th Percentile</div>
                        <div class="stat-value">892ms</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Error Rate</div>
                        <div class="stat-value">1.3%</div>
                        <div class="stat-change positive">‚Üì 0.2%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Uptime</div>
                        <div class="stat-value">99.97%</div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Response Time Over Time</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Error Rate</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="errorChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Section -->
            <div class="content-section" id="security">
                <div class="header">
                    <h1>Security & Abuse Prevention</h1>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Invalid API Key Attempts</div>
                        <div class="stat-value">47</div>
                        <div class="stat-change warning">‚ö†Ô∏è Moderate activity</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Rate Limit Hits</div>
                        <div class="stat-value">124</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Suspicious Patterns</div>
                        <div class="stat-value">3</div>
                        <div class="stat-change warning">‚ö†Ô∏è Requires review</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Blocked IPs</div>
                        <div class="stat-value">12</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Security Events</h3>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Event Type</th>
                                    <th>Client/IP</th>
                                    <th>Details</th>
                                    <th>Timestamp</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="securityTable">
                                <tr>
                                    <td><span class="badge warning">Rate Limit</span></td>
                                    <td>192.168.1.100</td>
                                    <td>Exceeded 100 req/min limit</td>
                                    <td>2 hours ago</td>
                                    <td><button class="action-btn view">View</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Billing Section -->
            <div class="content-section" id="billing">
                <div class="header">
                    <h1>Billing & Plans</h1>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">MRR</div>
                        <div class="stat-value">$24.8K</div>
                        <div class="stat-change positive">‚Üë $2.4K from last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ARR</div>
                        <div class="stat-value">$297K</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg LTV</div>
                        <div class="stat-value">$12.4K</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Churn Rate</div>
                        <div class="stat-value">2.1%</div>
                        <div class="stat-change positive">‚Üì 0.3%</div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Revenue by Plan</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="revenuePlanChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">MRR Growth</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="mrrChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Logs Section -->
            <div class="content-section" id="logs">
                <div class="header">
                    <h1>Admin Action Logs</h1>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Actions</h3>
                        <div class="filters">
                            <select class="form-input" style="width: auto;">
                                <option>All Actions</option>
                                <option>Client Created</option>
                                <option>API Key Generated</option>
                                <option>Limits Changed</option>
                                <option>Client Suspended</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Admin</th>
                                    <th>Action</th>
                                    <th>Target</th>
                                    <th>Details</th>
                                    <th>Timestamp</th>
                                </tr>
                            </thead>
                            <tbody id="logsTable">
                                <tr>
                                    <td>admin@vmize.com</td>
                                    <td><span class="badge success">API Key Created</span></td>
                                    <td>Acme Fashion</td>
                                    <td>Created production API key</td>
                                    <td>10 minutes ago</td>
                                </tr>
                                <tr>
                                    <td>admin@vmize.com</td>
                                    <td><span class="badge warning">Limit Increased</span></td>
                                    <td>Style Co.</td>
                                    <td>Monthly limit: 10,000 ‚Üí 50,000</td>
                                    <td>2 hours ago</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div class="content-section" id="analytics">
                <div class="header">
                    <h1>Advanced Analytics</h1>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Images Generated per Client</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="imagesPerClientChart"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">API Calls Distribution</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="apiDistributionChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Try-On Duration Histogram</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="durationHistogramChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="createClientModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Client</h2>
                <button class="modal-close" onclick="closeModal('createClient')">&times;</button>
            </div>
            <form onsubmit="createClient(event)">
                <div class="form-group">
                    <label class="form-label">Company Name*</label>
                    <input type="text" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Contact Email*</label>
                    <input type="email" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Plan*</label>
                    <select class="form-input" required>
                        <option value="">Select Plan</option>
                        <option>Starter</option>
                        <option>Professional</option>
                        <option>Enterprise</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Monthly Limit</label>
                    <input type="number" class="form-input" value="10000">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Create Client</button>
            </form>
        </div>
    </div>

    <div class="modal" id="createAPIKeyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New API Key</h2>
                <button class="modal-close" onclick="closeModal('createAPIKey')">&times;</button>
            </div>
            <form onsubmit="createAPIKey(event)">
                <div class="form-group">
                    <label class="form-label">Key Name*</label>
                    <input type="text" class="form-input" placeholder="e.g., shopify-prod" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Client*</label>
                    <select class="form-input" required>
                        <option value="">Select Client</option>
                        <option>Acme Fashion</option>
                        <option>Style Co.</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Scope*</label>
                    <select class="form-input" multiple style="height: 100px;">
                        <option selected>tryon</option>
                        <option selected>analytics</option>
                        <option>purchase</option>
                    </select>
                    <p style="font-size: 12px; color: #666; margin-top: 4px;">Hold Ctrl/Cmd to select multiple</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Monthly Usage Limit</label>
                    <input type="number" class="form-input" value="10000">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Generate API Key</button>
            </form>
        </div>
    </div>

    <script>
        // Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');

            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.nav-item').classList.add('active');

            // Load section data
            loadSectionData(sectionId);
        }

        // Modal management
        function openModal(modalId) {
            document.getElementById(modalId + 'Modal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId + 'Modal').classList.remove('active');
        }

        // Data loading
        function loadSectionData(sectionId) {
            console.log('Loading data for:', sectionId);
            
            if (sectionId === 'clients') {
                loadClientsData();
            } else if (sectionId === 'api-keys') {
                loadAPIKeysData();
            } else if (sectionId === 'usage') {
                loadUsageData();
            } else if (sectionId === 'images') {
                loadImagesData();
            }
        }

        function loadClientsData() {
            const mockClients = [
                { name: 'Acme Fashion', email: 'acme@fashion.com', plan: 'Enterprise', created: '2024-01-15', lastActivity: '2 hours ago', usage: '75%', status: 'active' },
                { name: 'Style Co.', email: 'hello@style.co', plan: 'Professional', created: '2024-02-20', lastActivity: '1 day ago', usage: '62%', status: 'active' },
                { name: 'Boutique XYZ', email: 'info@boutique.xyz', plan: 'Starter', created: '2024-03-10', lastActivity: '3 days ago', usage: '45%', status: 'paused' }
            ];

            const tbody = document.getElementById('clientsTable');
            tbody.innerHTML = mockClients.map(client => `
                <tr>
                    <td><strong>${client.name}</strong><br><span style="font-size: 12px; color: #666;">${client.email}</span></td>
                    <td>${client.plan}</td>
                    <td>${client.created}</td>
                    <td>${client.lastActivity}</td>
                    <td>${client.usage}</td>
                    <td><span class="badge ${client.status}">${client.status.charAt(0).toUpperCase() + client.status.slice(1)}</span></td>
                    <td>
                        <button class="action-btn view" onclick="viewClient('${client.name}')">View</button>
                        <button class="action-btn edit" onclick="editClient('${client.name}')">Edit</button>
                    </td>
                </tr>
            `).join('');
        }

        function loadAPIKeysData() {
            const mockKeys = [
                { name: 'shopify-prod', client: 'Acme Fashion', scope: 'tryon, analytics', limit: '50,000/mo', lastUsed: '5 min ago', status: 'active' },
                { name: 'wordpress-main', client: 'Style Co.', scope: 'tryon', limit: '20,000/mo', lastUsed: '1 hour ago', status: 'active' },
                { name: 'api-test', client: 'Boutique XYZ', scope: 'tryon, analytics, purchase', limit: '10,000/mo', lastUsed: '2 days ago', status: 'active' }
            ];

            const tbody = document.getElementById('apiKeysTable');
            tbody.innerHTML = mockKeys.map(key => `
                <tr>
                    <td><strong>${key.name}</strong></td>
                    <td>${key.client}</td>
                    <td><span style="font-size: 12px;">${key.scope}</span></td>
                    <td>${key.limit}</td>
                    <td>${key.lastUsed}</td>
                    <td><span class="badge ${key.status}">${key.status.charAt(0).toUpperCase() + key.status.slice(1)}</span></td>
                    <td>
                        <button class="action-btn view">View</button>
                        <button class="action-btn edit">Rotate</button>
                        <button class="action-btn delete">Revoke</button>
                    </td>
                </tr>
            `).join('');
        }

        function loadUsageData() {
            const mockUsage = [
                { client: 'Acme Fashion', calls: '125,000', tryons: '42,500', failed: '1.2%', avgTime: '12.3s', cost: '$1,245' },
                { client: 'Style Co.', calls: '89,000', tryons: '28,750', failed: '0.8%', avgTime: '11.8s', cost: '$892' },
                { client: 'Boutique XYZ', calls: '34,000', tryons: '12,400', failed: '1.5%', avgTime: '13.1s', cost: '$341' }
            ];

            const tbody = document.getElementById('usageTable');
            tbody.innerHTML = mockUsage.map(usage => `
                <tr>
                    <td><strong>${usage.client}</strong></td>
                    <td>${usage.calls}</td>
                    <td>${usage.tryons}</td>
                    <td>${usage.failed}</td>
                    <td>${usage.avgTime}</td>
                    <td>${usage.cost}</td>
                </tr>
            `).join('');
        }

        function loadImagesData() {
            const mockImages = [
                { id: 'img_abc123', client: 'Acme Fashion', user: 'user_xyz789', time: '12.4s', status: 'success', timestamp: '5 min ago' },
                { id: 'img_def456', client: 'Style Co.', user: 'session_456', time: '11.8s', status: 'success', timestamp: '8 min ago' },
                { id: 'img_ghi789', client: 'Boutique XYZ', user: 'user_abc123', time: '15.2s', status: 'failed', timestamp: '12 min ago' }
            ];

            const tbody = document.getElementById('imagesTable');
            tbody.innerHTML = mockImages.map(img => `
                <tr>
                    <td><code style="font-size: 12px;">${img.id}</code></td>
                    <td>${img.client}</td>
                    <td><code style="font-size: 12px;">${img.user}</code></td>
                    <td>${img.time}</td>
                    <td><span class="badge ${img.status}">${img.status.charAt(0).toUpperCase() + img.status.slice(1)}</span></td>
                    <td>${img.timestamp}</td>
                    <td>
                        <button class="action-btn view">View</button>
                    </td>
                </tr>
            `).join('');
        }

        // Charts
        function initCharts() {
            // Try-ons Over Time
            new Chart(document.getElementById('tryonsChart'), {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Try-Ons',
                        data: [2100, 2400, 2200, 2600, 2800, 2500, 2847],
                        borderColor: '#6B4CE6',
                        backgroundColor: 'rgba(107, 76, 230, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });

            // Revenue Chart
            new Chart(document.getElementById('revenueChart'), {
                type: 'bar',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Revenue',
                        data: [28000, 32000, 30000, 35000, 38000, 34000, 34200],
                        backgroundColor: 'rgba(76, 201, 240, 0.8)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });

            // Images Chart
            new Chart(document.getElementById('imagesChart'), {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Images Generated',
                        data: [2100, 2400, 2200, 2600, 2800, 2500, 2847],
                        borderColor: '#4CC9F0',
                        backgroundColor: 'rgba(76, 201, 240, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } }
                }
            });
        }

        // Actions
        function refreshData() {
            alert('Data refreshed!');
        }

        function exportData() {
            alert('Exporting data...');
        }

        function exportImages() {
            alert('Exporting image report...');
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = 'login.html';
            }
        }

        function createClient(e) {
            e.preventDefault();
            alert('Client created successfully!');
            closeModal('createClient');
        }

        function createAPIKey(e) {
            e.preventDefault();
            alert('API Key generated successfully!');
            closeModal('createAPIKey');
        }

        function viewClient(name) {
            alert('Viewing client: ' + name);
        }

        function editClient(name) {
            alert('Editing client: ' + name);
        }

        // Initialize
        window.addEventListener('load', () => {
            initCharts();
            loadClientsData();
        });
    </script>
</body>
</html>